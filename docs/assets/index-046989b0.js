(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function t(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(e){if(e.ep)return;e.ep=!0;const i=t(e);fetch(e.href,i)}})();const s=document.getElementById("game"),n=s.getContext("2d"),x=document.getElementById("hud"),m=document.getElementById("intro");s.width=600;s.height=600;let f=0,u=!1;class E{constructor(){this.x=0,this.y=s.height/2,this.speed=40,this.health=3}update(o){this.x+=this.speed*o}draw(){n.font="24px sans-serif",n.fillStyle="#fff",n.fillText("👾",this.x,this.y)}}class y{constructor(o,t){this.x=o,this.y=t,this.range=80,this.cooldown=0}update(o,t){if(this.cooldown-=o,this.cooldown<=0){const l=t.find(e=>Math.hypot(e.x-this.x,e.y-this.y)<this.range);l&&(l.health-=1,this.cooldown=.5)}}draw(){n.font="24px sans-serif",n.fillStyle="#fff",n.fillText("🏰",this.x-12,this.y)}}const r=[],h=[];let a=0;function w(){u||(u=!0,m.style.display="none",h.push(new y(s.width/2,s.height/2-50)),p=performance.now(),requestAnimationFrame(g))}m.addEventListener("click",w);s.addEventListener("click",c=>{if(!u){w();return}f>=5&&(h.push(new y(c.offsetX,c.offsetY)),f-=5)});let p=0;function g(c){const o=(c-p)/1e3;p=c,a-=o,a<=0&&(r.push(new E),a=2),n.clearRect(0,0,s.width,s.height),n.fillStyle="#ccc",n.fillRect(0,s.height/2+12,s.width,20);for(const t of r)t.update(o);for(const t of h)t.update(o,r);r.filter(t=>t.health<=0).forEach(()=>{f+=1});for(let t=r.length-1;t>=0;t--)(r[t].health<=0||r[t].x>s.width)&&r.splice(t,1);for(const t of r)t.draw();for(const t of h)t.draw();x.textContent=`💰${f}`,requestAnimationFrame(g)}
