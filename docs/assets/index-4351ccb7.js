(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();const i=document.getElementById("game"),n=i.getContext("2d"),w=document.getElementById("hud"),m=document.getElementById("intro");i.width=400;i.height=400;let f=0,h=!1;class x{constructor(){this.x=0,this.y=i.height/2,this.speed=40,this.health=3}update(o){this.x+=this.speed*o}draw(){n.font="24px sans-serif",n.fillStyle="#fff",n.fillText("👾",this.x,this.y)}}class E{constructor(o,t){this.x=o,this.y=t,this.range=80,this.cooldown=0}update(o,t){if(this.cooldown-=o,this.cooldown<=0){const l=t.find(e=>Math.hypot(e.x-this.x,e.y-this.y)<this.range);l&&(l.health-=1,this.cooldown=.5)}}draw(){n.font="24px sans-serif",n.fillStyle="#fff",n.fillText("🏰",this.x-12,this.y)}}const r=[],u=[];let a=0;function y(){h||(h=!0,m.style.display="none",p=performance.now(),requestAnimationFrame(g))}m.addEventListener("click",y);i.addEventListener("click",c=>{if(!h){y();return}f>=5&&(u.push(new E(c.offsetX,c.offsetY)),f-=5)});let p=0;function g(c){const o=(c-p)/1e3;p=c,a-=o,a<=0&&(r.push(new x),a=2),n.clearRect(0,0,i.width,i.height),n.fillStyle="#ccc",n.fillRect(0,i.height/2+12,i.width,20);for(const t of r)t.update(o);for(const t of u)t.update(o,r);r.filter(t=>t.health<=0).forEach(()=>{f+=1});for(let t=r.length-1;t>=0;t--)(r[t].health<=0||r[t].x>i.width)&&r.splice(t,1);for(const t of r)t.draw();for(const t of u)t.draw();w.textContent=`💰${f}`,requestAnimationFrame(g)}
